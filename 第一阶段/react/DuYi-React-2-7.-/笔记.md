# 事件

在 React 中，组件的事件，本质上就是一个属性

按照之前 React 对组件的约定，由于事件本质上是一个属性，因此也需要使用小驼峰命名法

- 内置组件的事件在注册的时候知道何时触发，但是自定义的组件不行（自定义的事件，像 onClick 这样的事件和内置组件是一样的）
- 事件是自定义组件的属性，当组件完成某些功能的时候就会触发事件
- 有事件了就要在合适的时间触发事件
- 子组件在父组件中注册事件，在自己的组件中触发事件

```js
import React, { Component } from "react";

export default class Tick extends Component {
  constructor(props) {
    super(props);
    this.state = {
      number: props.number,
    };

    const timer = setInterval(() => {
      this.setState({
        number: this.state.number - 1,
      });

      if (this.state.number === 0) {
        clearInterval(timer);
        //倒计时完成了
        this.props.onOver && this.props.onOver();
      }
    }, 1000);
  }
  render() {
    return <h1>倒计时：{this.state.number}</h1>;
  }
}

import React, { Component } from "react";
import Tick from "./Tick";

export default class TickControl extends Component {
  state = {
    isOver: false, //倒计时是否完成
  };

  handleOver() {
    this.setState({
      isOver: true,
    });
  }

  render() {
    let status = "正在倒计时";
    if (this.state.isOver) {
      status = "倒计时完成";
    }
    return (
      <div>
        <Tick onOver={this.handleOver.bind(this)} number={10} />
        <h2>{status}</h2>
      </div>
    );
  }
}
```

**如果没有特殊处理，在事件处理函数中，this 指向 undefined**

1. 使用 bind 函数，绑定 this
   - ```js
     this.handleClick.bind(this);
     ```
2. 使用箭头函数
   - ```js
     handleClick = () => {
       console.log(this);
       console.log("点击了");
     };
     ```
