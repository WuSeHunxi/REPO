{"remainingRequest":"F:\\2020\\第一阶段\\vue\\路由原理\\node_modules\\babel-loader\\lib\\index.js!F:\\2020\\第一阶段\\vue\\路由原理\\src\\vue-router\\index.js","dependencies":[{"path":"F:\\2020\\第一阶段\\vue\\路由原理\\src\\vue-router\\index.js","mtime":1587210918956},{"path":"F:\\2020\\第一阶段\\vue\\路由原理\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\2020\\第一阶段\\vue\\路由原理\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IGluc3RhbGwgZnJvbSAnLi9pbnN0YWxsJzsKaW1wb3J0IEhpc3RvcnkgZnJvbSAnLi9oaXN0b3J5JzsKCmNsYXNzIFZ1ZVJvdXRlciB7CiAgY29uc3RydWN0b3Iob3B0aW9ucykgewogICAgdGhpcy5yb3V0ZU1hcCA9IHRoaXMuY3JlYXRlUm91dGVkTWFwKG9wdGlvbnMucm91dGVzIHx8IFtdKTsKICAgIHRoaXMuaGlzdG9yeSA9IG5ldyBIaXN0b3J5KCk7CiAgICB0aGlzLm1vZGUgPSBvcHRpb25zLm1vZGUgfHwgJ2hhc2gnOwogICAgdGhpcy5pbml0KCk7CiAgfSAvL+W+l+WIsOaWsOeahOagt+WtkOeahOaVsOe7hAoKCiAgY3JlYXRlUm91dGVkTWFwKHJvdXRlcykgewogICAgY29uc3Qgcm91dGVNYXAgPSB7fTsKCiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJvdXRlcy5sZW5ndGg7IGkrKykgewogICAgICBjb25zdCByb3V0ZSA9IHJvdXRlc1tpXTsKICAgICAgcm91dGVNYXBbcm91dGUucGF0aF0gPSByb3V0ZS5jb21wb25lbnQ7CiAgICB9CgogICAgcmV0dXJuIHJvdXRlTWFwOwogIH0KCiAgaW5pdCgpIHsKICAgIGlmICh0aGlzLm1vZGUgPT09ICdoYXNoJykgewogICAgICBsb2NhdGlvbi5oYXNoID8gJycgOiBsb2NhdGlvbi5oYXNoID0gJy8nOwogICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIiwgKCkgPT4gewogICAgICAgIHRoaXMuaGlzdG9yeS5jdXJyZW50LnBhdGggPSBsb2NhdGlvbi5oYXNoLnNsaWNlKDEpOwogICAgICB9KTsKICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoImhhc2hjaGFuZ2UiLCAoKSA9PiB7CiAgICAgICAgdGhpcy5oaXN0b3J5LmN1cnJlbnQucGF0aCA9IGxvY2F0aW9uLmhhc2guc2xpY2UoMSk7CiAgICAgIH0pOwogICAgfSBlbHNlIHsKICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE8nLCAoKSA9PiB7CiAgICAgICAgdGhpcy5oaXN0b3J5LmN1cnJlbnQucGF0aCA9IGxvY2F0aW9uLnBhdGhuYW1lOwogICAgICB9KTsKICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3BvcHN0YXRlJywgKCkgPT4gewogICAgICAgIHRoaXMuaGlzdG9yeS5jdXJyZW50LnBhdGggPSBsb2NhdGlvbi5wYXRobmFtZTsKICAgICAgfSk7CiAgICB9CiAgfQoKfQoKVnVlUm91dGVyLmluc3RhbGwgPSBpbnN0YWxsOwpleHBvcnQgZGVmYXVsdCBWdWVSb3V0ZXI7"},{"version":3,"sources":["F:/2020/第一阶段/vue/路由原理/src/vue-router/index.js"],"names":["install","History","VueRouter","constructor","options","routeMap","createRoutedMap","routes","history","mode","init","i","length","route","path","component","location","hash","document","addEventListener","current","slice","window","pathname"],"mappings":"AAAA,OAAOA,OAAP,MAAoB,WAApB;AACA,OAAOC,OAAP,MAAoB,WAApB;;AAEA,MAAMC,SAAN,CAAe;AACbC,EAAAA,WAAW,CAACC,OAAD,EAAS;AAClB,SAAKC,QAAL,GAAc,KAAKC,eAAL,CAAqBF,OAAO,CAACG,MAAR,IAAgB,EAArC,CAAd;AACA,SAAKC,OAAL,GAAa,IAAIP,OAAJ,EAAb;AACA,SAAKQ,IAAL,GAAUL,OAAO,CAACK,IAAR,IAAc,MAAxB;AACA,SAAKC,IAAL;AACD,GANY,CAQb;;;AACAJ,EAAAA,eAAe,CAACC,MAAD,EAAQ;AACrB,UAAMF,QAAQ,GAAC,EAAf;;AACA,SAAK,IAAIM,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGJ,MAAM,CAACK,MAA3B,EAAmCD,CAAC,EAApC,EAAwC;AACtC,YAAME,KAAK,GAAGN,MAAM,CAACI,CAAD,CAApB;AACAN,MAAAA,QAAQ,CAACQ,KAAK,CAACC,IAAP,CAAR,GAAqBD,KAAK,CAACE,SAA3B;AACD;;AACD,WAAOV,QAAP;AACD;;AAEDK,EAAAA,IAAI,GAAE;AACJ,QAAG,KAAKD,IAAL,KAAY,MAAf,EAAsB;AACpBO,MAAAA,QAAQ,CAACC,IAAT,GAAc,EAAd,GAAkBD,QAAQ,CAACC,IAAT,GAAc,GAAhC;AACAC,MAAAA,QAAQ,CAACC,gBAAT,CAA0B,kBAA1B,EAA6C,MAAI;AAC/C,aAAKX,OAAL,CAAaY,OAAb,CAAqBN,IAArB,GAA0BE,QAAQ,CAACC,IAAT,CAAcI,KAAd,CAAoB,CAApB,CAA1B;AACD,OAFD;AAIAC,MAAAA,MAAM,CAACH,gBAAP,CAAwB,YAAxB,EAAqC,MAAI;AACvC,aAAKX,OAAL,CAAaY,OAAb,CAAqBN,IAArB,GAA0BE,QAAQ,CAACC,IAAT,CAAcI,KAAd,CAAoB,CAApB,CAA1B;AACD,OAFD;AAGD,KATD,MASK;AACHH,MAAAA,QAAQ,CAACC,gBAAT,CAA0B,IAA1B,EAA+B,MAAI;AACjC,aAAKX,OAAL,CAAaY,OAAb,CAAqBN,IAArB,GAA0BE,QAAQ,CAACO,QAAnC;AACD,OAFD;AAGAD,MAAAA,MAAM,CAACH,gBAAP,CAAwB,UAAxB,EAAmC,MAAI;AACrC,aAAKX,OAAL,CAAaY,OAAb,CAAqBN,IAArB,GAA0BE,QAAQ,CAACO,QAAnC;AACD,OAFD;AAGD;AACF;;AApCY;;AAuCfrB,SAAS,CAACF,OAAV,GAAkBA,OAAlB;AAEA,eAAeE,SAAf","sourcesContent":["import install from './install';\nimport History from './history';\n\nclass VueRouter{\n  constructor(options){\n    this.routeMap=this.createRoutedMap(options.routes||[]);\n    this.history=new History();\n    this.mode=options.mode||'hash';\n    this.init();\n  }\n\n  //得到新的样子的数组\n  createRoutedMap(routes){\n    const routeMap={};\n    for (let i = 0; i < routes.length; i++) {\n      const route = routes[i];\n      routeMap[route.path]=route.component;\n    }\n    return routeMap;\n  }\n\n  init(){\n    if(this.mode==='hash'){\n      location.hash?'':(location.hash='/');\n      document.addEventListener(\"DOMContentLoaded\",()=>{\n        this.history.current.path=location.hash.slice(1);\n      })\n\n      window.addEventListener(\"hashchange\",()=>{\n        this.history.current.path=location.hash.slice(1);\n      })\n    }else{\n      document.addEventListener('DO',()=>{\n        this.history.current.path=location.pathname;\n      })\n      window.addEventListener('popstate',()=>{\n        this.history.current.path=location.pathname;\n      })\n    }\n  }\n}\n\nVueRouter.install=install;\n\nexport default VueRouter;"]}]}